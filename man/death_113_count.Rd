% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/death_functions.R
\name{death_113_count}
\alias{death_113_count}
\title{Summarize NCHS 113 causes of deaths}
\usage{
death_113_count(
  ph.data = NULL,
  causeids = seq(1, 113, 1),
  cause = NULL,
  icdcol = "underlying_cod_code",
  kingco = T,
  ypll_age = NULL,
  death_age_col = NULL
)
}
\arguments{
\item{ph.data}{a data.table or data.frame. Must contain death data structured
with one person per row and with at least one column of ICD10 death codes.}

\item{causeids}{an integer vector of length >=1 & <= 114, with a minimum value
of 1 and a maximum value of 114.

The default is \code{1:113}, i.e., the standard panel of WA DOH / NCHS 113
causes of death.}

\item{cause}{an OPTIONAL character vector specifying the complete or partial
keyword for the cause of death of interest. It is not case sensitive and you
can specify it in two ways: 1) \code{cause = c('viral', 'cough')} or 2)
\code{cause = c("viral|cough")}. If you specify any keyword(s),
the function will ignore the \code{causeids} argument.

The default is \code{NULL}, i.e., the function will rely on the \code{causeids}
argument to identify the causes of death.}

\item{icdcol}{a character vector of length one that specifies the name of the
column in ph.data that contains the ICD10 death codes of interest.

The default is \code{underlying_cod_code}, which is found in the properly
formatted death data obtained using the \code{get_data_death()} function.}

\item{kingco}{a logical vector of length one. It specifies whether you want to
limit the analysis to King County.

\strong{NOTE} this only works with data imported with the \code{get_data_death()}
function because it needs the logical variable \code{chi_geo_kc}.

The default is kingco = TRUE.}

\item{ypll_age}{an optional numeric vector of length 1. When specified, it
should be the age (an integer) used for \strong{Years of Potential Life Lost} (YPLL)
calculations. Valid values are between 1 & 99 (inclusive), though 65 and 85 are the most
common. For example, \code{ypll_age = 65} would sum the total number of years
that could have been lived had everyone in the data lived to at least 65.
Note that this function returns the total number of YPLL. Additional
processing is necessary to calculate rates per 100,000.

The default is \code{ypll_age = NULL}, which will skip YPLL calculations.}

\item{death_age_col}{an optional character vector of length one that specifies
the name of the column in ph.data with the decedents' age at death
in years. It is only needed if \code{ypll_age} is
specified AND if ph.data lacks a column named \code{chi_age}.

The default is \code{death_age_col = NULL}.}
}
\value{
Generates a table with three columns, \code{causeid},  \code{cause.of.death},
and \code{deaths}. If \code{ypll_age} is specified, a \code{ypll_##} column
will also be added to the table. Any other columns that are in the original data
set that is submitted to this function will also be returned. E.g., if the
original data contained gender and race_eth, the returned table would contain
the four default columns, plus all combinations of gender and race_eth as
stratification variables.

By default, it will return all 113 causes of death. You can specify which
causes of death you want to assess using the \code{causeids} or \code{cause}
arguments.
}
\description{
Generate death counts for the National Center for Health
Statistics (NCHS) 113 Selected Causes of Death (COD). Needs line-level death
data with a properly formatted ICD10 column.

In addition to the causes of death you specify with \code{causeids} or
\code{cause}, it will automatically return the total deaths as well as
COVID-19 deaths (since they do not have their own NCHS category).

See \code{rads::death_113()} for a complete list of available causesid
and cause values.
}
\details{
There are actually 114 rows, with causeid 114 being the official
\code{CDC version of causeid 95 (Residual)}, i.e., \code{All other diseases
(Residual)}. Causeid 95 was intentionally changed to match the definition
used by WA DOH. You can get results for any or all of the 113(+1) causes of
death using the \code{causeids} or \code{cause} arguments.
}
\note{
Provide the function with the minimum necessary number of columns since all
extraneous columns will be used to stratify the data. For example, if you
included 'year', 'race_eth', and 'gender', the results would be stratified
by every combination of year_x_race_eth_x_gender.
}
\examples{
# example 1: death count only
set.seed(98104)
deathdata <- data.table::data.table(
  cod.icd10 = c(rep("A85.2", round(runif(1, 30, 100000), 0)),
                rep("B51", round(runif(1, 30, 100000), 0)),
                rep("U071", round(runif(1, 30, 100000), 0)),
                rep("E44", round(runif(1, 30, 100000), 0)),
                rep("E62", round(runif(1, 30, 100000), 0)),
                rep("G00", round(runif(1, 30, 100000), 0)),
                rep("J10", round(runif(1, 30, 100000), 0)),
                rep("J15", round(runif(1, 30, 100000), 0)),
                rep("V874", round(runif(1, 30, 100000), 0)))
)
eg1 <- death_113_count(ph.data = deathdata,
                       causeids = seq(1, 113, 1),
                       cause = NULL,
                       icdcol = "cod.icd10",
                       kingco = FALSE,
                       ypll_age = NULL,
                       death_age_col = NULL)
eg1[]

# example 2: with YPLL calculation
deathdata2 <- data.table::copy(deathdata)
set.seed(98104)
deathdata2[, ageofdeath := rads::round2(rnorm(1, mean = 70, sd = 5 ), 0),
           1:nrow(deathdata2)] # synthetic age of death
eg2 <- death_113_count(ph.data = deathdata2,
                       causeids = seq(1, 113, 1),
                       cause = NULL,
                       icdcol = "cod.icd10",
                       kingco = FALSE,
                       ypll_age = 65,
                       death_age_col = "ageofdeath")
eg2[]

}
\references{
\url{https://www.cdc.gov/nchs/data/dvs/Part9InstructionManual2020-508.pdf} &
\url{https://secureaccess.wa.gov/doh/chat/Content/FilesForDownload/CodeSetDefinitions/NCHS113CausesOfDeath.pdf}
}
