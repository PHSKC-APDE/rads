% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/chars_functions.R
\name{chars_validate_data}
\alias{chars_validate_data}
\title{Validate and prepare CHARS data for use with chars_icd_ccs_count() &
chars_injury_matrix_count()}
\usage{
chars_validate_data(
  ph.data = NULL,
  icdcol = "diag1",
  icdcm_version = 10,
  verbose = TRUE
)
}
\arguments{
\item{ph.data}{a data.table or data.frame containing CHARS (Comprehensive
Hospital Abstract Reporting System) data. The dataset should be structured
with one person per row and include the necessary columns for injury and
ICD-CM analysis.

The default is \code{ph.data = NULL}}

\item{icdcol}{a character vector of length one. The name of the column in
\code{ph.data} that contains the ICD-CM codes.

The default is \code{icdcol = 'diag1'}}

\item{icdcm_version}{an integer vector of length one, limited to 9 or 10.
It specifies which ICD-CM version to validate against.

The default is \code{icdcm_version = 10}}

\item{verbose}{a logical vector of length one. When TRUE (default), prints
messages about validation results. When FALSE, only shows
warnings and errors.

The default is \code{verbose = TRUE}}
}
\value{
Returns a data.table with validated and potentially modified CHARS data.
The function also prints informative messages about validation results,
warnings about missing standard categories, and confirmation when data
meets all requirements.
}
\description{
Validates that a dataset meets the requirements for use with
\code{\link[=chars_injury_matrix_count]{chars_injury_matrix_count()}} and \code{\link[=chars_icd_ccs_count]{chars_icd_ccs_count()}}. This function
checks for required columns, validates data formats, and performs necessary
transformations to ensure compatibility with rads CHARS analysis functions.
}
\details{
This function performs the following validation checks:

\strong{Required columns:}
\itemize{
\item \code{seq_no}: unique patient-level identifier (must be unique integer per row)
\item \code{injury_nature_broad}: logical indicator for broad injury definition
\item \code{injury_nature_narrow}: logical indicator for narrow injury definition
\item \code{injury_intent}: character column with values like "assault", "unintentional", etc.
\item \code{injury_mechanism}: character column with values like "fall", "firearm", etc.
\item ICD column (specified by \code{icdcol}, default is \code{diag1})
}

\strong{Optional columns:}
\itemize{
\item \code{chi_geo_kc}: if present, must only contain \code{"King County"} or \code{NA}
}

\strong{Data transformations:}
\itemize{
\item ICDcm codes cleaned and updated to a standardized format
}
}
\examples{
# Validate synthetic CHARS data
mydata <- rads.data::synthetic_chars
validated_data <- chars_validate_data(ph.data = mydata)

}
\references{
\itemize{
\item CDC Injury Code and Matrices: \url{https://www.cdc.gov/nchs/injury/injury_matrices.htm}
}
}
