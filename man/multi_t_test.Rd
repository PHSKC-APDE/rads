% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utilities.R
\name{multi_t_test}
\alias{multi_t_test}
\title{Perform t-tests for Multiple Comparisons with Summary Statistics}
\usage{
multi_t_test(
  means,
  ses,
  reference_index,
  n = NULL,
  alpha = 0.05,
  df_method = "estimated",
  alternative = "two.sided",
  adjust_method = NULL
)
}
\arguments{
\item{means}{Numeric vector of group means.}

\item{ses}{Numeric vector of standard errors for each group.}

\item{reference_index}{Integer indicating the index of the reference group.}

\item{n}{Optional numeric vector of sample sizes for each group.}

\item{alpha}{Numeric value for significance level (default is \strong{\code{0.05}}).}

\item{df_method}{String specifying the method for calculating degrees of
freedom. Options are:
\itemize{
\item \strong{\code{'estimated'}} (Welchâ€“Satterthwaite equation): This method, which
corresponds to Welch's t-test, calculates an approximation of the degrees
of freedom based on the sample variances and sizes. It's particularly
useful when groups have unequal variances and/or unequal sample sizes,
making it generally more reliable than the standard t-test in these
situations. It is a data driven approach and is often preferred due to
balance between Type I Errors (false +) and Type II Errors (false -).
\item \strong{\code{'conservative'}} (df = 2): Uses the minimum possible degrees of
freedom, resulting in the widest confidence intervals (for the difference
in means) and the most conservative (largest) p-values. Reduces Type I
Error (false +) and increases Type II Error (false -).
\item \strong{\code{'moderate'}} (df = k - 1): Uses the number of groups minus 1 as the degrees
of freedom, providing a balance between conservative and liberal approaches.
\item \strong{\code{'liberal'}} (df = Inf): Assumes infinite degrees of freedom, resulting in
the narrowest confidence intervals (for the difference in means) and the
most liberal (smallest) p-values. Increases Type I Error (false +) and
reduces Type II Error (false -).
}

Default is \strong{\code{'estimated'}}.}

\item{alternative}{String specifying the alternative hypothesis: \strong{\code{'two.sided'}}
(default), \strong{\code{'less'}}, or \strong{\code{'greater'}}. Default is \strong{\code{'two.sided'}}.}

\item{adjust_method}{String specifying the method of adjustment for multiple
comparisons: \strong{\code{NULL}}, \strong{\code{'Holm-Bonferroni'}},
\strong{\code{'Benjamini-Hochberg'}}. Refer to the \code{holm} and \code{bh} descriptions
in \code{\link[stats:p.adjust]{stats::p.adjust()}} for more information. Default is \strong{\code{NULL}}.}
}
\value{
A data.table containing comparison results with the following columns:
\item{comparison}{String describing the comparison}
\item{diff_means}{Numeric difference in means}
\item{ci_lower}{Numeric lower bound of the confidence interval}
\item{ci_upper}{Numeric upper bound of the confidence interval}
\item{p.value}{Numeric p-value}
\item{significant}{Logical indicating if the result is significant (TRUE if
p-value < alpha, FALSE otherwise)}
\item{t.statistic}{Numeric t-statistic}
\item{df}{Numeric degrees of freedom}
\item{df_method}{String indicating the method used for
calculating degrees of freedom}
\item{adjust_method}{String indicating the method used for multiple
comparisons p.value adjustment (when \code{adjust_method} is not \code{NULL})}
}
\description{
This function performs t-tests comparing multiple groups against a reference
group using summary statistics. It offers flexibility in the method for
calculating degrees of freedom, can estimate sample sizes if they are not
provided, and can adjust p-values for multiple comparisons.
}
\details{
This function conducts t-tests to compare multiple groups against a reference
group.

The \code{estimated} degrees of freedom method (Welch's t-test) is generally
preferred and is set as the default. However, when sample sizes (\code{n}) are
less than 30, results can be unreliable. When \code{n} is not specified and
\code{df_method = "estimated"}, the function estimates sample sizes based partly
on the distribution of mean values. The quality of these estimates depends on
the number of groups (length of the means argument). While the function can
estimate sample sizes if not provided, it's always preferable to use actual
sample sizes when available to ensure more accurate results.
}
\note{
This function assumes unequal variances, which is typically more appropriate
for comparisons across demographic groups in vital statistics, survey data, and
other population-based studies. Equal variances are rarely encountered in such
contexts due to inherent differences between subpopulations. If you have the
underlying raw data (not just the means and standard errors) and want to
perform calculations assuming equal variances or a paired t-test, please
refer to \code{\link[stats:t.test]{stats::t.test()}}.
}
\examples{
# Example 1: Comparing birthweights across different maternal age groups
age_groups <- c("18-24", "25-29", "30-34", "35-39", "40+")
birthweight_means <- c(3150, 3450, 3400, 3250, 3100)  # in grams
birthweight_ses <- c(50, 45, 40, 55, 60)
sample_sizes <- c(500, 800, 750, 400, 200)
reference_group <- 3  # comparing all groups to the 30-34 age group

birthweight_comparison <- multi_t_test(
  means = birthweight_means,
  ses = birthweight_ses,
  reference_index = reference_group,
  n = sample_sizes,
  df_method = "estimated"
)

# Add age group labels to the results
birthweight_comparison[, Age_Group := age_groups]

print(birthweight_comparison)

}
\seealso{
\code{\link[=propagate_uncertainty]{propagate_uncertainty()}} for more robust uncertainty
propagation when comparing two estimates with potentially asymmetric
confidence intervals or non-normal distributions.
}
