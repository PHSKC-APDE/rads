% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utilities.R
\name{adjust_direct}
\alias{adjust_direct}
\title{Calculate crude and directly adjusted rates}
\usage{
adjust_direct(
  count,
  pop,
  stdpop,
  per = 1e+05,
  conf.level = 0.95,
  event_type = "unique"
)
}
\arguments{
\item{count}{Numeric vector of indeterminate length. The number of events of interest (e.g., deaths, births, etc.)}

\item{pop}{Numeric vector of indeterminate length. The population denominator for the count.}

\item{stdpop}{Numeric vector of indeterminate length. The reference standard population corresponding to the population.}

\item{per}{Integer vector of length 1. A multiplier for all rates and CI, e.g., when per = 1000, the rates are per 1000 people}

\item{conf.level}{A numeric vector of length 1. The confidence interval used in the calculations, >0 & <1, typically 0.95}

\item{event_type}{Character vector of length 1. Either \code{"unique"} (default) for events
that can only occur once per person (e.g., death, first diagnosis), or \code{"repeatable"}
for events that can occur multiple times per person (e.g., ER visits, infections).
When \code{"unique"}, rates are capped at 100\%; when "repeatable", rates can exceed 100\%.}
}
\value{
A labeled numeric vector containing: count (total events), pop (total population),
crude.rate, crude.lci, crude.uci, adj.rate, adj.lci, adj.uci (rates and CI are scaled by \code{per})
}
\description{
Calculate crude and directly adjusted rates
}
\section{Data anomalies}{

When \code{event_type = "unique"} and \code{pop < count} (which can occur when small
populations are modeled estimates), \code{adjust_direct()} internally caps the rate
at 100\% by using the count as the denominator. This ensures logical
consistency for events that can only occur once per person.

When \code{pop = 0}, the function sets \code{pop = 1} to avoid division by zero errors.

The original population values are always preserved in the output.
}

\examples{
\donttest{
# Unique events (e.g., deaths, first diagnosis)
adjust_direct(count = c(11, 9),
              pop = c(500, 500),
              stdpop = c(500, 900),
              per = 100,
              conf.level = 0.95,
              event_type = "unique")

# Repeatable events (e.g., ER visits, infections)
adjust_direct(count = c(150, 200),
              pop = c(500, 500),
              stdpop = c(500, 900),
              per = 100,
              conf.level = 0.95,
              event_type = "repeatable")

# Unique events when count > population (caps unique events at 100\%)
adjust_direct(count = c(25, 30),
              pop = c(20, 25),
              stdpop = c(500, 900),
              per = 100,
              conf.level = 0.95,
              event_type = "unique")

# Repeatable events when count > population (allows > 100\%)
adjust_direct(count = c(25, 30),
              pop = c(20, 25),
              stdpop = c(500, 900),
              per = 100,
              conf.level = 0.95,
              event_type = "repeatable")

}

}
\seealso{
\code{\link[=age_standardize]{age_standardize()}} for a useful wrapper that calls upon standard reference populations.
}
