% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/life_table.R
\name{life_table}
\alias{life_table}
\title{Generate a standard life table}
\usage{
life_table(
  mydt = NULL,
  myages = "ages",
  mydeaths = "deaths",
  mypops = "pop",
  myprops = "fraction",
  ci = 0.95
)
}
\arguments{
\item{mydt}{a data.table or data.frame. Must contain aggregated deaths and
corresponding populations, as well as the age interval and the average
fraction of years lived in the interval by those who die in the interval.}

\item{myages}{character vector of length one identifying a column
specifying the beginning and end of each age interval separated by a hyphen.
Note, the start of each interval should be the end of the previous
interval, e.g., '5-10', '10-15', '15-20', etc. Think of this as short-hand
for [5, 10), [10, 15), [15, 20). The final interval should be open ended with
the starting value followed by a '+' (e.g., '85+', '90+', etc.). The maximum
age cannot exceed 100. Leave the value blank (i.e., NA) for the total deaths
at an unknown age. These deaths will be distributed proportionately over the
other age groups.}

\item{mydeaths}{character vector of length one identifying a numeric column
with the total deaths for the given age interval in the given year(s).}

\item{mypops}{character vector of length one identifying a numeric column
with the total population in the age intervals corresponding to mydeaths.
This is technically the mid-year population. In practice we usually
use OFM population estimates.}

\item{myprops}{character vector of length one identifying a numeric column
with the average proportion of the interval lived by those who died in the
interval. For example, if those who died in '80-85' lived an average of 1000
days past their 80th birthday, myprops would be 0.54 (1000/(365.25*5)).}

\item{ci}{numeric of length one. Confidence level, >0 & <1, default == 0.95.}
}
\value{
a data.table with the pre-existing columns plus the
standard life table columns
}
\description{
Generates a standard life table given a data.frame or data.table with basic
attributes.
}
\details{
The function returns the following life table columns:
\itemize{
\item mx: age interval specific death rate
\item qx: probability of dying in the age interval
\item lx: # of (theoretical) persons alive at the start of the age interval
\item dx: # of deaths during the age interval
\item ax: average fraction of the interval lived by those who died in the interval
\item Lx: total person years lived in the age interval
\item Tx: total person years lived beyond the start of the age interval
\item ex: expectation of life (a.k.a., life expectancy) at the start of the age
interval
}
}
\examples{
 temp1 <- data.table::data.table(
          ages = c("0-1", "1-2", "2-3", "3-4", "4-5", "5-10", "10-15",
                   "15-20", "20+"),
          dead = c(391, 30, 17, 14, 8, 41, 73, 202, 28919),
          population = c(25640, 25104, 25507, 24998, 24038, 131202, 128490,
                       127951, 1747871),
          fraction = c(0.09, rep(0.5, 8)))
 temp1[]
 temp2 <- life_table(mydt = temp1,
                      myages = "ages",
                      mydeaths = "dead",
                      mypops = "population",
                      myprops = "fraction")
 temp2[]

}
\references{
Chiang, Chin Long & World Health Organization. (1979).
Life table and mortality analysis / Chin Long Chiang.
World Health Organization. https://apps.who.int/iris/handle/10665/62916

Silcocks PB, Jenner DA, Reza R. Life expectancy as a summary of mortality in
a population: Statistical considerations and suitability for use by health
authorities. J Epidemiol Community Health 55(1):38â€“43. 2001
}
