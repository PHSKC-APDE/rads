% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/death_functions.R
\name{death_130_count}
\alias{death_130_count}
\title{Summarize NCHS 130 Select Causes of Infant Death}
\usage{
death_130_count(
  ph.data = NULL,
  causeids = seq(1, 130, 1),
  cause = NULL,
  icdcol = "underlying_cod_code",
  kingco = T,
  group_by = NULL,
  ypll_age = NULL,
  death_age_col = NULL
)
}
\arguments{
\item{ph.data}{a data.table or data.frame. Must contain death data structured
with one person per row and with at least one column of ICD10 death codes.}

\item{causeids}{an integer vector of length >=1 & <= 130, with a minimum value
of 1 and a maximum value of 130.

The default is \code{1:130}, i.e., the compolte standard panel of WA DOH /
NCHS 130 causes of death.}

\item{cause}{an OPTIONAL character vector specifying the complete or partial
keyword for the cause of death of interest. It is not case sensitive and you
can specify it in two ways: 1) \code{cause = c('viral', 'cough')} or 2)
\code{cause = c("viral|cough")}. If you specify any keyword(s),
the function will ignore the \code{causeids} argument.

The default is \code{NULL}, i.e., the function will rely on the \code{causeids}
argument to identify the causes of death.}

\item{icdcol}{a character vector of length one that specifies the name of the
column in ph.data that contains the ICD10 death codes of interest.

The default is \code{underlying_cod_code}, which is found in the properly
formatted death data obtained using the \code{get_data_death()} function.}

\item{kingco}{a logical vector of length one. It specifies whether you want to
limit the analysis to King County.

\strong{NOTE} this only works with data imported with the \code{get_data_death()}
function because it needs the logical variable \code{chi_geo_kc}.

The default is kingco = TRUE.}

\item{group_by}{a character vector of indeterminate length. This is used to
specify all the variables by which you want to group (a.k.a. stratify) the
results. For example, if you specified \code{group_by = c('chi_sex',
'chi_race_6')}, the results would be stratified by each combination of sex
and race.

The default is \code{group_by = NULL}}

\item{ypll_age}{an optional numeric vector of length 1. When specified, it
should be the age (an integer) used for \strong{Years of Potential Life Lost} (YPLL)
calculations. Valid values are between 1 & 99 (inclusive), though 65 and 85 are the most
common. For example, \code{ypll_age = 65} would sum the total number of years
that could have been lived had everyone in the data lived to at least 65.
Note that this function returns the total number of YPLL. Additional
processing is necessary to calculate rates per 100,000.

The default is \code{ypll_age = NULL}, which will skip YPLL calculations.}

\item{death_age_col}{an optional character vector of length one that specifies
the name of the column in ph.data with the decedents' age at death
in years. It is only needed if \code{ypll_age} is
specified AND if ph.data lacks a column named \code{chi_age}.

The default is \code{death_age_col = NULL}.}
}
\value{
Generates a table with three columns, \code{causeid},  \code{cause.of.death},
and \code{deaths}. If \code{ypll_age} is specified, a \code{ypll_##} column
will also be added to the table. Columns identifies by the \code{group_by}
argument will also be returned.

By default, it will return all 130 causes of death. You can specify which
causes of death you want to assess using the \code{causeids} or \code{cause}
arguments.
}
\description{
Generate death counts for the National Center for Health
Statistics (NCHS) 130 Selected Causes of Infant Death. Needs line-level death
data with a properly formatted ICD10 column.

In addition to the causes of death you specify with \code{causeids} or
\code{cause}, it will automatically return the total deaths as well as
COVID-19 deaths (since they do not have their own NCHS category).

See \code{rads::death_130()} for a complete list of available causesid
and cause values.
}
\details{
These 130 causes of death are for decedants ages < 1 year old.
}
\note{
Calls upon \code{rads::death_xxx_count}.
}
\examples{
# example 1: death count only
set.seed(98104)
deathdata <- data.table::data.table(
  cod.icd10 = c(rep("P36.3", round(runif(1, 30, 100000), 0)),
                rep("V022", round(runif(1, 30, 100000), 0)),
                rep("P021", round(runif(1, 30, 100000), 0)),
                rep("P202", round(runif(1, 30, 100000), 0)),
                rep("I26", round(runif(1, 30, 100000), 0)),
                rep("R951", round(runif(1, 30, 100000), 0)),
                rep("P080", round(runif(1, 30, 100000), 0)),
                rep("A09", round(runif(1, 30, 100000), 0)),
                rep("P702", round(runif(1, 30, 100000), 0)))
)
eg1 <- death_130_count(ph.data = deathdata,
                       causeids = seq(1, 130, 1),
                       cause = NULL,
                       icdcol = "cod.icd10",
                       kingco = FALSE,
                       ypll_age = NULL,
                       death_age_col = NULL)
eg1[]

}
\references{
\url{https://www.cdc.gov/nchs/data/dvs/Part9InstructionManual2020-508.pdf} &
\url{https://secureaccess.wa.gov/doh/chat/Content/FilesForDownload/CodeSetDefinitions/NCHS130CausesInfantDeath_Codes.pdf}
}
