% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/death_functions.R
\name{death_xxx_count}
\alias{death_xxx_count}
\title{Summarize NCHS causes of deaths}
\usage{
death_xxx_count(
  ph.data = NULL,
  causeids = NULL,
  cause = NULL,
  icdcol = "underlying_cod_code",
  kingco = T,
  group_by = NULL,
  ypll_age = NULL,
  death_age_col = NULL,
  nchsnum = NULL
)
}
\arguments{
\item{ph.data}{a data.table or data.frame. Must contain death data structured
with one person per row and with at least one column of ICD10 death codes.}

\item{causeids}{an integer vector, with a minimum value of 1 and a maximum
value of dependent upon the NCHS reference table.}

\item{cause}{an OPTIONAL character vector specifying the complete or partial
keyword for the cause of death of interest. It is not case sensitive and you
can specify it in two ways: 1) \code{cause = c('viral', 'cough')} or 2)
\code{cause = c("viral|cough")}. If you specify any keyword(s),
the function will ignore the \code{causeids} argument.

The default is \code{NULL}, i.e., the function will rely on the \code{causeids}
argument to identify the causes of death.}

\item{icdcol}{a character vector of length one that specifies the name of the
column in ph.data that contains the ICD10 death codes of interest.

The default is \code{underlying_cod_code}, which is found in the properly
formatted death data obtained using the \code{get_data_death()} function.}

\item{kingco}{a logical vector of length one. It specifies whether you want to
limit the analysis to King County.

\strong{NOTE} this only works with data imported with the \code{get_data_death()}
function because it needs the logical variable \code{chi_geo_kc}.

The default is kingco = TRUE.}

\item{group_by}{a character vector of indeterminate length. This is used to
specify all the variables by which you want to group (a.k.a. stratify) the
results. For example, if you specified \code{group_by = c('chi_sex',
'chi_race_6')}, the results would be stratified by each combination of sex
and race.

The default is \code{group_by = NULL}}

\item{ypll_age}{an optional numeric vector of length 1. When specified, it
should be the age (an integer) used for \strong{Years of Potential Life Lost} (YPLL)
calculations. Valid values are between 1 & 99 (inclusive), though 65 and 85 are the most
common. For example, \code{ypll_age = 65} would sum the total number of years
that could have been lived had everyone in the data lived to at least 65.
Note that this function returns the total number of YPLL. Additional
processing is necessary to calculate rates per 100,000.

The default is \code{ypll_age = NULL}, which will skip YPLL calculations.}

\item{death_age_col}{an optional character vector of length one that specifies
the name of the column in ph.data with the decedents' age at death
in years. It is only needed if \code{ypll_age} is
specified AND if ph.data lacks a column named \code{chi_age}.

The default is \code{death_age_col = NULL}.}

\item{nchsnum}{specifies whether the function should reference NCHS 113 Selected
COD (\code{rads::death_113()}) or NCHS 130 Selected Causes of Infant Death
(\code{rads::death_130()}).}
}
\value{
Generates a table with three columns, \code{causeid},  \code{cause.of.death},
and \code{deaths}. If \code{ypll_age} is specified, a \code{ypll_##} column
will also be added to the table. Columns in the \code{group_by}
argument will also be returned.

By default, it will return all relevant causes of death. You can specify which
causes of death you want to assess using the \code{causeids} or \code{cause}
arguments.
}
\description{
Generalized function that is called upon by \code{death_113_count()} and
\code{death_130_count()}. Generates death counts for the National Center for
Health Statistics (NCHS) Selected Causes of Death (COD). Needs line-level
death data with a properly formatted ICD10 column.

In addition to the causes of death you specify with \code{causeids} or
\code{cause}, it will automatically return the total deaths as well as
COVID-19 deaths (since they do not have their own NCHS category).
}
\details{
See \code{rads::death_113()} & \code{rads::death_130()} for a complete list
of available causesid and cause values.
}
\examples{
# example 1: death count only
set.seed(98104)
deathdata <- data.table::data.table(
  cod.icd10 = c(rep("A85.2", round(runif(1, 30, 100000), 0)),
                rep("B51", round(runif(1, 30, 100000), 0)),
                rep("U071", round(runif(1, 30, 100000), 0)),
                rep("E44", round(runif(1, 30, 100000), 0)),
                rep("E62", round(runif(1, 30, 100000), 0)),
                rep("G00", round(runif(1, 30, 100000), 0)),
                rep("J10", round(runif(1, 30, 100000), 0)),
                rep("J15", round(runif(1, 30, 100000), 0)),
                rep("V874", round(runif(1, 30, 100000), 0)))
)
eg1 <- death_xxx_count(ph.data = deathdata,
                       causeids = seq(1, 113, 1),
                       cause = NULL,
                       icdcol = "cod.icd10",
                       kingco = FALSE,
                       ypll_age = NULL,
                       death_age_col = NULL,
                       nchsnum = 113)
head(eg1)

}
\references{
\url{https://www.cdc.gov/nchs/data/dvs/Part9InstructionManual2020-508.pdf} &
\url{https://secureaccess.wa.gov/doh/chat/Content/FilesForDownload/CodeSetDefinitions/NCHS113CausesOfDeath.pdf}
\url{https://secureaccess.wa.gov/doh/chat/Content/FilesForDownload/TechnicalNotes.pdf}
}
