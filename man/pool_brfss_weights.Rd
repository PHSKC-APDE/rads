% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utilities.R
\name{pool_brfss_weights}
\alias{pool_brfss_weights}
\title{Create New BRFSS Survey Weights for Multi-Year Analyses}
\usage{
pool_brfss_weights(
  ph.data,
  years,
  year_var = "chi_year",
  old_wt_var = "finalwt1",
  new_wt_var,
  strata = "x_ststr"
)
}
\arguments{
\item{ph.data}{A \code{data.frame}, \code{data.table}, \code{dtsurvey} object
or \code{\link[mitools]{imputationList}} containing BRFSS survey data}

\item{years}{An integer vector specifying which years to include in the weight
calculation}

\item{year_var}{Character string specifying the name of the column containing
year values. Defaults to '\code{chi_year}'}

\item{old_wt_var}{Character string specifying the name of the column
containing the single year survey weights. Defaults to '\code{finalwt1}'}

\item{new_wt_var}{Character string specifying the name for the new weight
variable to be created}

\item{strata}{Character string specifying the name for the strata to be used
when survey setting the data. Defaults to '\code{x_ststr}'}
}
\value{
For data.frame/data.table input: Returns a survey-weighted
\code{\link[dtsurvey]{dtsurvey}}/data.table with
an additional column containing the new adjusted weights.

For \code{\link[mitools]{imputationList}} input: Returns a new imputationList
where each \code{\link[dtsurvey]{dtsurvey}}/data.table is
survey-weighted using the new weights.

In both cases, the new weight column will be specified by the value of
\code{new_wt_var}.
}
\description{
Creates a \code{\link[dtsurvey]{dtsurvey}}/data.table object with properly adjusted
survey weights for analyzing Behavioral Risk Factor
Surveillance System (BRFSS) data across multiple years. The built-in BRFSS
survey weight (\verb{\code{finalwt1}}) is designed for single-year analyses. When
analyzing BRFSS data across multiple years, the survey weights must be
proportionately down scaled to approximate an average year's population. This
function creates new survey weights by adjusting the original weights based
on the relative population size of each year within the specified time period.
}
\details{
When analyzing multiple years of BRFSS data together, using the original
weights would lead to overestimation of population totals, as each year's
weights sum to that year's total survey population. This function down scales
the weights proportionately based on each year's relative population size
within the specified time period(s), ensuring that estimates approximate an
average year's population.

Note that while \code{\link{get_data_brfss}} automatically creates multi-year
weights during the initial data download, you may need to use this function
to create new weights when analyzing specific subsets of years. For example,
some BRFSS questions are only asked in specific years, requiring custom weights
to be calculated for those specific time periods. The original weight
(\code{'finalwt1'}) will always be saved in order to allow this function to be
used repeatedly on the same data set.
}
\examples{
\dontrun{
# Create weights for analyzing 2017-2022 BRFSS data
brfss_data <- pool_brfss_weights(
  ph.data = my_brfss_data,
  years = 2017:2022,
  new_wt_var = "wt_2017_2022"
)

# Create weights for specific years when a question was asked
brfss_data <- pool_brfss_weights(
  ph.data = my_brfss_data,
  years = c(2017, 2019, 2021),
  new_wt_var = "wt_odd_years"
)
}

}
