<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introduction</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h2>Introduction</h2>

<p>This vignette will provide some examples of ways to pull population data into R from the Azure cloud (thank you Jeremy!). </p>

<p>As of 02/2023, there are two sets of population estimates. </p>

<p>The first, <a href="https://github.com/PHSKC-APDE/frankenpop">frankenpop/Population Interim Estimates (PIE)</a> were created by APDE. They are based on 2020 geographies for 2000 - 2022+.</p>

<p>The second (and older/outdated ones), between 2000 and 2020 derive are Population numbers are estimated by the <a href="https://ofm.wa.gov/washington-data-research/population-demographics">WA Office of Financial Management (OFM) population unit</a>. OFM produces two sets of estimates: (1) <a href="https://ofm.wa.gov/washington-data-research/population-demographics/population-estimates/april-1-official-population-estimates">April 1 official population estimates</a> for cities and towns and (2) <a href="https://ofm.wa.gov/washington-data-research/population-demographics/population-estimates/small-area-estimates-program">Small Area Estimates (SAE)</a> for smaller geographies. The <code>get_population()</code> function pulls the SAE numbers and, when <code>round = T</code>, should be the same as those in <a href="https://secureaccess.wa.gov/doh/chat/Entry.mvc">CHAT</a>.</p>

<p><strong>NOTE!!</strong> To get the most out of this vignette, I highly recommend that you actually type each and every bit of code into R. Doing so will almost definitely help you learn the syntax much faster than just reading the vignette or copying and pasting the code.</p>

<h2><code>get_population</code> arguments</h2>

<p>Arguments are the values that we send to a function when it is called. Generally, typing <code>args(my_function_of_interest)</code> will return the possible arguments including any defaults. For example,</p>

<pre><code class="r">args(get_population)
</code></pre>

<pre><code>## function (kingco = T, years = NA, ages = c(0:100), genders = c(&quot;f&quot;, 
##     &quot;m&quot;), races = c(&quot;aian&quot;, &quot;asian&quot;, &quot;black&quot;, &quot;hispanic&quot;, &quot;multiple&quot;, 
##     &quot;nhpi&quot;, &quot;white&quot;), race_type = c(&quot;race_eth&quot;), geo_type = c(&quot;kc&quot;), 
##     group_by = NULL, round = FALSE, mykey = &quot;hhsaw&quot;, census_vintage = 2020, 
##     geo_vintage = 2010, schema = &quot;ref&quot;, table_prefix = &quot;pop_geo_&quot;, 
##     return_query = FALSE) 
## NULL
</code></pre>

<p>The standard arguments for get_population() are:</p>

<p>1) <code>kingco</code> &lt;&lt; Logical vector of length 1. Identifies whether you want population estimates limited to King County. Only impacts results for geo_type in c(&#39;blk&#39;, blkgrp&#39;, &#39;lgd&#39;, &#39;scd&#39;, &#39;tract&#39;, &#39;zip&#39;). Default == TRUE.</p>

<p>2) <code>years</code> &lt;&lt; Numeric vector. Identifies which year(s) of data should be pulled. Default == c(2020).</p>

<p>3) <code>ages</code> &lt;&lt; Numeric vector. Identifies which age(s) should be pulled. Default == c(0:100), with 100 being the top coded value for 100:120.</p>

<p>4) <code>genders</code> &lt;&lt; Character vector of length 1 or 2. Identifies gender(s) should be pulled. The acceptable values are &#39;f&#39;, &#39;female&#39;, &#39;m&#39;, and &#39;male&#39;. Default == c(&#39;f&#39;, &#39;m&#39;).</p>

<p>5) <code>races</code> &lt;&lt; Character vector of length 1 to 7. Identifies which race(s) or ethnicity should be pulled. The acceptable values are &ldquo;aian&rdquo;, &ldquo;asian&rdquo;, &ldquo;black&rdquo;, &ldquo;hispanic&rdquo;, &ldquo;multiple&rdquo;, &ldquo;nhpi&rdquo;, and &ldquo;white&rdquo;. Default == all the possible values.</p>

<p>6) <code>race_type</code> &lt;&lt; Character vector of length 1. Identifies whether to pull race data with Hispanic as an ethnicity (&ldquo;race&rdquo;) or Hispanic as a race (&ldquo;race_eth&rdquo;). Default == c(&ldquo;race_eth&rdquo;).</p>

<p>7) <code>geo_type</code> &lt;&lt; Character vector of length 1. Identifies the geographic level for which you want population estimates. The acceptable values are: &#39;blk&#39;, &#39;blkgrp&#39;, &#39;county&#39;, &#39;hra&#39;, &#39;kc&#39;, &#39;lgd&#39; (WA State legislative districts), &#39;region&#39;, &#39;seattle&#39;, &#39;scd&#39; (school districts), &#39;tract&#39;, and &#39;zip&#39;. Default == &ldquo;kc&rdquo;.</p>

<p>8) <code>group_by</code> &lt;&lt; Character vector of length 0 to 7. Identifies how you would like the data &#39;grouped&#39; (i.e., stratified). Valid options are limited to: &ldquo;years&rdquo;, &ldquo;ages&rdquo;, &ldquo;genders&rdquo;, &ldquo;race&rdquo;, &ldquo;race_eth&rdquo;, &ldquo;fips_co&rdquo;, and &ldquo;geo_id&rdquo;. Default == NULL, i.e., estimates are only grouped / aggregated by geography.</p>

<p>9) <code>round</code> &lt;&lt; Logical vector of length 1. Identifies whether or not population estimates should be returned as whole numbers. Default == TRUE.</p>

<p>10) <code>mykey</code> &lt;&lt; a character vector with the name of the <code>keyring::</code> key that provides access to the Health and Human Services Analytic Workspace (HHSAW). If you have never set your keyring before and or do not know what this is refering to, just type <code>keyring::key_set(&#39;hhsaw&#39;, username = &#39;ALastname@kingcounty.gov&#39;)</code> into your R console (making sure to replace the username). The default is &#39;hhsaw&#39;.</p>

<p>11) census_vintage &lt;&lt; Either 2010 or 2020. Specifies the anchor census of the desired estimates. </p>

<p>12) geo_vintage &lt;&lt; Either 2010 or 2020. Specifies the anchor census for geographies. For example, 2020 will return geographies based on 2020 blocks.</p>

<p>13) schema &lt;&lt; Unless you are a power user, don&#39;t mess with this</p>

<p>14) table_prefix &lt;&lt; unless you are a power user, don&#39;t mess with this</p>

<p>15) return_query &lt;&lt; logical. Rather than returning results, the query/queries used to fetch the results are provided</p>

<p>There is no need to specify any or all of the arguments listed above. As the following example shows, the default arguments for <code>get_population</code> provide the overall most recent year&#39;s estimated King County population.</p>

<pre><code class="r">get_population()[]
</code></pre>

<pre><code>##        pop geo_type      geo_id year   age       gender
## 1: 2317700       kc King County 2022 0-100 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<hr/>

<h2>Example analyses</h2>

<p><em>**Note 1</em><em>: The use of <code>head()</code> below is not necessary. It is a convenience function that displays the first 6 rows of data and was used to keep the output in this vignette tidy.</em></p>

<p><em>**Note 2</em><em>: The use of <code>[]</code> after get_population() is used to print the output to the console. Typically, you would not print the results but would save them as an object. E.g., <code>my.pop.est &lt;- get_population()</code>.</em></p>

<h3>Geographic estimates</h3>

<p><strong>WA</strong></p>

<pre><code class="r">get_population(geo_type = &#39;wa&#39;, round = TRUE)[]
</code></pre>

<pre><code>##        pop geo_type           geo_id year   age       gender
## 1: 7864400       wa Washington State 2022 0-100 Female, Male
##                                                    race_eth geo_id_code
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White          53
</code></pre>

<p><strong>King County</strong></p>

<pre><code class="r">get_population(round = T)[]
</code></pre>

<pre><code>##        pop geo_type      geo_id year   age       gender
## 1: 2317700       kc King County 2022 0-100 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County Regions</strong></p>

<pre><code class="r">get_population(geo_type = c(&quot;region&quot;),
               group_by = c(&quot;geo_id&quot;),
               round = TRUE)[]
</code></pre>

<pre><code>##       pop geo_type  geo_id year   age       gender
## 1: 609680   region    East 2022 0-100 Female, Male
## 2: 808130   region   South 2022 0-100 Female, Male
## 3: 759393   region Seattle 2022 0-100 Female, Male
## 4: 140498   region   North 2022 0-100 Female, Male
##                                                    race_eth geo_id_code
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           1
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           4
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           3
## 4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           2
</code></pre>

<p><strong>King County Regions with <code>round=FALSE</code></strong></p>

<p>Turn off rounding to get the exact (fractional) number of people estimated.</p>

<pre><code class="r">rads::get_population(geo_type = &#39;region&#39;, 
                     round = F)[]
</code></pre>

<pre><code>##         pop geo_type  geo_id year   age       gender
## 1: 609679.7   region    East 2022 0-100 Female, Male
## 2: 808129.6   region   South 2022 0-100 Female, Male
## 3: 759392.8   region Seattle 2022 0-100 Female, Male
## 4: 140497.9   region   North 2022 0-100 Female, Male
##                                                    race_eth geo_id_code
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           1
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           4
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           3
## 4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           2
</code></pre>

<p><strong>King County HRAs</strong></p>

<pre><code class="r">head(get_population(geo_type = c(&quot;hra&quot;), group_by = c(&quot;geo_id&quot;))[])  
</code></pre>

<pre><code>##         pop geo_type         geo_id year   age       gender
## 1: 35903.43      hra    Renton-East 2022 0-100 Female, Male
## 2: 58272.26      hra   Renton-South 2022 0-100 Female, Male
## 3: 26382.31      hra       Fairwood 2022 0-100 Female, Male
## 4: 75916.72      hra       Downtown 2022 0-100 Female, Male
## 5: 11075.33      hra  Vashon Island 2022 0-100 Female, Male
## 6: 36069.47      hra Bellevue-South 2022 0-100 Female, Male
##                                                    race_eth geo_id_code
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White       20000
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White       20200
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White       11000
## 4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White        2500
## 5: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White       25000
## 6: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White        4200
</code></pre>

<p><strong>King County Zip codes</strong></p>

<pre><code class="r">head(get_population(geo_type = c(&quot;zip&quot;), group_by = c(&quot;geo_id&quot;))[])  
</code></pre>

<pre><code>##         pop geo_type geo_id year   age       gender
## 1: 20781.87      zip  98177 2022 0-100 Female, Male
## 2: 54830.48      zip  98115 2022 0-100 Female, Male
## 3: 49713.01      zip  98042 2022 0-100 Female, Male
## 4: 16164.66      zip  98045 2022 0-100 Female, Male
## 5: 13399.54      zip  98077 2022 0-100 Female, Male
## 6: 16443.72      zip  98065 2022 0-100 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 5: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 6: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County Census Tracts</strong></p>

<pre><code class="r">head(get_population(geo_type = c(&quot;tract&quot;), group_by = c(&quot;geo_id&quot;), ages = 18, census_vintage = 2020, geo_vintage = 2020)[])  
</code></pre>

<pre><code>##         pop geo_type      geo_id year age       gender
## 1: 12.55822    tract 53033008003 2022  18 Female, Male
## 2: 47.36526    tract 53033023603 2022  18 Female, Male
## 3: 26.09754    tract 53033023902 2022  18 Female, Male
## 4: 34.36343    tract 53033024001 2022  18 Female, Male
## 5: 92.52864    tract 53033030005 2022  18 Female, Male
## 6: 62.54261    tract 53033025806 2022  18 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 5: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 6: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County Census Block Groups</strong></p>

<pre><code class="r">head(get_population(geo_type = c(&quot;blkgrp&quot;), group_by = c(&quot;geo_id&quot;), ages = 18,census_vintage = 2020, geo_vintage = 2020)[])  
</code></pre>

<pre><code>##          pop geo_type       geo_id year age       gender
## 1:  7.275591   blkgrp 530330042012 2022  18 Female, Male
## 2: 11.302780   blkgrp 530330097014 2022  18 Female, Male
## 3: 16.683887   blkgrp 530330239021 2022  18 Female, Male
## 4: 26.405645   blkgrp 530330248002 2022  18 Female, Male
## 5:  9.797107   blkgrp 530330253031 2022  18 Female, Male
## 6: 12.914570   blkgrp 530330298031 2022  18 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 5: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 6: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County Census Blocks</strong></p>

<pre><code class="r">#ages added to make things go faster
head(get_population(geo_type = c(&quot;blk&quot;), group_by = c(&quot;geo_id&quot;), ages = 18, census_vintage = 2020, geo_vintage = 2020)[])  
</code></pre>

<pre><code>##           pop geo_type          geo_id year age       gender
## 1:  0.7782502      blk 530330204024003 2022  18 Female, Male
## 2:  1.5908622      blk 530330321043002 2022  18 Female, Male
## 3: 12.9308556      blk 530330300053000 2022  18 Female, Male
## 4:  1.7645618      blk 530330097023010 2022  18 Female, Male
## 5:  7.2847884      blk 530330220054001 2022  18 Female, Male
## 6:  0.2647371      blk 530330222031009 2022  18 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 5: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 6: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<h3>Other simple arguments</h3>

<p><strong>King County multiple years combined</strong></p>

<pre><code class="r">get_population(years = 2017:2019)[]
</code></pre>

<pre><code>##        pop geo_type      geo_id      year   age       gender
## 1: 6590714       kc King County 2017-2019 0-100 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County multiple years stratified</strong></p>

<pre><code class="r">get_population(years = 2017:2019, 
               group_by = &quot;years&quot;)[]
</code></pre>

<pre><code>##        pop geo_type      geo_id year   age       gender
## 1: 2159597       kc King County 2017 0-100 Female, Male
## 2: 2234092       kc King County 2019 0-100 Female, Male
## 3: 2197025       kc King County 2018 0-100 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County multiple ages combined</strong></p>

<pre><code class="r">get_population(ages = 65:70)[]
</code></pre>

<pre><code>##         pop geo_type      geo_id year   age       gender
## 1: 127610.9       kc King County 2022 65-70 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County multiple ages stratified</strong></p>

<pre><code class="r">get_population(ages = 65:70, group_by = &quot;ages&quot;)[]
</code></pre>

<pre><code>##         pop geo_type      geo_id year age       gender
## 1: 19089.56       kc King County 2022  68 Female, Male
## 2: 23812.15       kc King County 2022  66 Female, Male
## 3: 25375.36       kc King County 2022  65 Female, Male
## 4: 17479.23       kc King County 2022  69 Female, Male
## 5: 19311.89       kc King County 2022  70 Female, Male
## 6: 22542.67       kc King County 2022  67 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 5: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 6: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County female only</strong></p>

<pre><code class="r">get_population(genders = &quot;F&quot;)[]
</code></pre>

<pre><code>##        pop geo_type      geo_id year   age       gender
## 1: 1149276       kc King County 2022 0-100 Female, Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County gender stratified</strong></p>

<pre><code class="r">get_population(group_by = &quot;genders&quot;)[]
</code></pre>

<pre><code>##        pop geo_type      geo_id year   age gender
## 1: 1168424       kc King County 2022 0-100 Female
## 2: 1149276       kc King County 2022 0-100   Male
##                                                    race_eth
## 1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
## 2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White
</code></pre>

<p><strong>King County AIAN (not Hispanic)</strong></p>

<pre><code class="r">get_population(races = &quot;aian&quot;, race_type = &quot;race_eth&quot;)[]
</code></pre>

<pre><code>##      pop geo_type      geo_id year   age       gender race_eth
## 1: 11936       kc King County 2022 0-100 Female, Male     AIAN
</code></pre>

<p><strong>King County AIAN (regardless of Hispanic ethnicity)</strong></p>

<pre><code class="r">get_population(races = &quot;aian&quot;, race_type = &quot;race&quot;, group_by = &#39;race&#39;)[]
</code></pre>

<pre><code>##         pop geo_type      geo_id year   age       gender race
## 1: 44829.39       kc King County 2022 0-100 Female, Male AIAN
</code></pre>

<p><strong>King County stratified by Hispanic as race</strong></p>

<pre><code class="r">get_population(race_type = &quot;race_eth&quot;, group_by = &quot;race_eth&quot;)[]
</code></pre>

<pre><code>##        pop geo_type      geo_id year   age       gender      race_eth
## 1: 1229997       kc King County 2022 0-100 Female, Male         White
## 2:   11936       kc King County 2022 0-100 Female, Male          AIAN
## 3:  149831       kc King County 2022 0-100 Female, Male Multiple race
## 4:  158385       kc King County 2022 0-100 Female, Male         Black
## 5:   20712       kc King County 2022 0-100 Female, Male          NHPI
## 6:  259077       kc King County 2022 0-100 Female, Male      Hispanic
## 7:  487762       kc King County 2022 0-100 Female, Male         Asian
</code></pre>

<p><strong>King County stratified by race (Hispanic as ethnicity)</strong></p>

<pre><code class="r">get_population(race_type = &quot;race&quot;, group_by = &quot;race&quot;)[]
</code></pre>

<pre><code>##           pop geo_type      geo_id year   age       gender          race
## 1: 1396462.08       kc King County 2022 0-100 Female, Male         White
## 2:   44829.39       kc King County 2022 0-100 Female, Male          AIAN
## 3:  181480.94       kc King County 2022 0-100 Female, Male Multiple race
## 4:  172776.59       kc King County 2022 0-100 Female, Male         Black
## 5:   23542.04       kc King County 2022 0-100 Female, Male          NHPI
## 6:  498609.00       kc King County 2022 0-100 Female, Male         Asian
</code></pre>

<h3>Complex arguments</h3>

<p><strong>King County regions stratified by year and gender</strong></p>

<pre><code class="r">get_population(geo_type = &quot;region&quot;, 
               years = 2017:2019, 
               group_by = c(&quot;geo_id&quot;, &quot;years&quot;, &quot;genders&quot;))[]
</code></pre>

<pre><code>##           pop geo_type  geo_id year   age gender
##  1: 364571.19   region Seattle 2019 0-100 Female
##  2:  66887.49   region   North 2019 0-100 Female
##  3: 343862.72   region Seattle 2017 0-100   Male
##  4: 277311.28   region    East 2017 0-100   Male
##  5: 356830.04   region Seattle 2018 0-100 Female
##  6: 397742.98   region   South 2018 0-100 Female
##  7: 390957.46   region   South 2017 0-100 Female
##  8:  68564.12   region   North 2019 0-100   Male
##  9:  65460.59   region   North 2018 0-100 Female
## 10: 284277.76   region    East 2018 0-100 Female
## 11: 387960.01   region   South 2017 0-100   Male
## 12: 281510.87   region    East 2018 0-100   Male
## 13: 349335.78   region Seattle 2017 0-100 Female
## 14: 398585.93   region   South 2019 0-100   Male
## 15:  64375.15   region   North 2017 0-100 Female
## 16: 393787.33   region   South 2018 0-100   Male
## 17:  67145.06   region   North 2018 0-100   Male
## 18: 350270.60   region Seattle 2018 0-100   Male
## 19: 356805.39   region Seattle 2019 0-100   Male
## 20: 403511.62   region   South 2019 0-100 Female
## 21: 289201.81   region    East 2019 0-100 Female
## 22:  66206.60   region   North 2017 0-100   Male
## 23: 285964.66   region    East 2019 0-100   Male
## 24: 279587.96   region    East 2017 0-100 Female
##           pop geo_type  geo_id year   age gender
##                                                     race_eth geo_id_code
##  1: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           3
##  2: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           2
##  3: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           3
##  4: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           1
##  5: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           3
##  6: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           4
##  7: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           4
##  8: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           2
##  9: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           2
## 10: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           1
## 11: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           4
## 12: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           1
## 13: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           3
## 14: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           4
## 15: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           2
## 16: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           4
## 17: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           2
## 18: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           3
## 19: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           3
## 20: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           4
## 21: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           1
## 22: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           2
## 23: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           1
## 24: AIAN, Asian, Black, Hispanic, Multiple race, NHPI, White           1
##                                                     race_eth geo_id_code
</code></pre>

<p><strong>King County regions stratified by year &ndash; Female Hispanic and Asian-NH residents aged 16-25 only &ndash; not rounded</strong></p>

<pre><code class="r">get_population(ages = 16:25, 
               genders = &quot;F&quot;, 
               years = 2017:2019, 
               races = c(&quot;hispanic&quot;, &quot;asian&quot;), 
               geo_type = &quot;region&quot;, 
               race_type = &quot;race_eth&quot;, 
               group_by = c(&quot;geo_id&quot;, &quot;years&quot;, &quot;race_eth&quot;), 
               round = F)[]
</code></pre>

<pre><code>##            pop geo_type  geo_id year   age       gender race_eth geo_id_code
##  1:  2646.1429   region    East 2018 16-25 Female, Male Hispanic           1
##  2:  2690.0698   region    East 2019 16-25 Female, Male Hispanic           1
##  3:  7538.5131   region   South 2017 16-25 Female, Male    Asian           4
##  4:  5669.8845   region    East 2017 16-25 Female, Male    Asian           1
##  5:  1175.0308   region   North 2017 16-25 Female, Male    Asian           2
##  6:  6596.0261   region Seattle 2017 16-25 Female, Male Hispanic           3
##  7:  2583.8136   region    East 2017 16-25 Female, Male Hispanic           1
##  8: 12111.4091   region Seattle 2019 16-25 Female, Male    Asian           3
##  9: 11465.2493   region Seattle 2018 16-25 Female, Male    Asian           3
## 10:   937.2483   region   North 2019 16-25 Female, Male Hispanic           2
## 11:  7800.0988   region   South 2018 16-25 Female, Male    Asian           4
## 12:   911.7558   region   North 2018 16-25 Female, Male Hispanic           2
## 13:  5978.1064   region    East 2018 16-25 Female, Male    Asian           1
## 14:  8858.9849   region   South 2017 16-25 Female, Male Hispanic           4
## 15:  8832.6460   region   South 2019 16-25 Female, Male Hispanic           4
## 16:  8040.1918   region   South 2019 16-25 Female, Male    Asian           4
## 17:  8872.2499   region   South 2018 16-25 Female, Male Hispanic           4
## 18:  6344.4286   region    East 2019 16-25 Female, Male    Asian           1
## 19:  1292.0299   region   North 2019 16-25 Female, Male    Asian           2
## 20:  1221.6790   region   North 2018 16-25 Female, Male    Asian           2
## 21:  7321.8006   region Seattle 2019 16-25 Female, Male Hispanic           3
## 22:  6923.3890   region Seattle 2018 16-25 Female, Male Hispanic           3
## 23: 10845.6264   region Seattle 2017 16-25 Female, Male    Asian           3
## 24:   887.0854   region   North 2017 16-25 Female, Male Hispanic           2
##            pop geo_type  geo_id year   age       gender race_eth geo_id_code
</code></pre>

</body>

</html>
